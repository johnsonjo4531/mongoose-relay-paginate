"use strict";(self.webpackChunkmongoose_relay_paginate=self.webpackChunkmongoose_relay_paginate||[]).push([[616],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return d}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),u=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=u(e.components);return r.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=u(t),d=a,f=m["".concat(s,".").concat(d)]||m[d]||p[d]||o;return t?r.createElement(f,l(l({ref:n},c),{},{components:t})):r.createElement(f,l({ref:n},c))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,l=new Array(o);l[0]=m;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var u=2;u<o;u++)l[u]=t[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},6286:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return s},default:function(){return d},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return p}});var r=t(7462),a=t(3366),o=(t(7294),t(3905)),l=["components"],i={},s="relayPaginate()",u={unversionedId:"API/relayPaginate",id:"API/relayPaginate",title:"relayPaginate()",description:"You'll need to import this package at the top of your entry file:",source:"@site/docs/API/relayPaginate.md",sourceDirName:"API",slug:"/API/relayPaginate",permalink:"/mongoose-relay-paginate/docs/API/relayPaginate",editUrl:"https://github.com/johnsonjo4531/mongoose-relay-paginate/tree/main/packages/create-docusaurus/templates/shared/docs/API/relayPaginate.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"aggregateRelayPaginate()",permalink:"/mongoose-relay-paginate/docs/API/aggregateRelayPaginate"},next:{title:"Full Example",permalink:"/mongoose-relay-paginate/docs/full-example"}},c={},p=[],m={toc:p};function d(e){var n=e.components,t=(0,a.Z)(e,l);return(0,o.kt)("wrapper",(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"relaypaginate"},"relayPaginate()"),(0,o.kt)("p",null,"You'll need to import this package at the top of your entry file:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'import "mongoose-relay-paginate";\n')),(0,o.kt)("p",null,"Then you can use ",(0,o.kt)("inlineCode",{parentName:"p"},".relayPaginate()")," off of any mongoose query."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const result = await UserModel.find()\n  // This is just the default mongoose sort\n  .sort({ _id: -1 })\n  // We can use the relayPaginate from this library off of any Query.\n  .relayPaginate({\n    toCursor(doc) {\n      return {\n        _id: doc._id,\n      };\n    },\n    first: 1,\n  });\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"relayPaginate")," takes in only one argument and that is its options  argument."),(0,o.kt)("p",null,"The only necessary part of relayPaginate option is the toCursor method you pass in. Abstractly ",(0,o.kt)("inlineCode",{parentName:"p"},"toCursor")," is a function that takes in a document node and returns a cursor. The cursor defines a way that the specific item in a collection should be found. Say for example you have three user's with names: Bill, Jill, and Phill, which could be created like so."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'const doc = new UserModel({\n  name: "Bill",\n  email: "bill@example.com",\n  avatar: "https://i.imgur.com/dM7Thhn.png",\n});\n\nconst doc2 = new UserModel({\n  name: "Jill",\n  email: "jill@example.com",\n  avatar: "https://i.imgur.com/dM7Thhn.png",\n});\n\nconst doc3 = new UserModel({\n  name: "Phill",\n  email: "Phill@example.com",\n  avatar: "https://i.imgur.com/dM7Thhn.png",\n});\nawait doc.save();\nawait doc2.save();\nawait doc3.save();\n')),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"toCursor")," here would select the user's name as the possible cursors. This means the before and after options, if provided, also have to fit this shape in order to return the proper output."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const result = await UserModel.find()\n    // We sort by names from a-z\n    .sort({ name: 1 })\n    .relayPaginate({\n      // we allow the cursor to be the user's name\n      toCursor(doc) {\n        return {\n          name: doc.name,\n        };\n      },\n      // we get the first 2 items only\n      first: 2,\n      // We start getting results only after we have found bill's record\n      after: {\n        name: \"Bill\"\n      }\n    });\nconsole.log(result.nodes); // Will be an array of Jill and then Phill's object\n")),(0,o.kt)("p",null,"Generally you would want the cursor (represented by the return of your ",(0,o.kt)("inlineCode",{parentName:"p"},"toCursor"),", and the before and after options) to match whatever you are sorting by."))}d.isMDXComponent=!0}}]);
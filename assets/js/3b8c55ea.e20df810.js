"use strict";(self.webpackChunkmongoose_relay_paginate=self.webpackChunkmongoose_relay_paginate||[]).push([[3217],{6995:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>g,frontMatter:()=>s,metadata:()=>i,toc:()=>c});var a=t(5893),o=t(1151);const s={sidebar_position:2},r="Installation",i={id:"installation",title:"Installation",description:"To use this library first install in your project, like so:",source:"@site/docs/installation.md",sourceDirName:".",slug:"/installation",permalink:"/mongoose-relay-paginate/docs/installation",draft:!1,unlisted:!1,editUrl:"https://github.com/johnsonjo4531/mongoose-relay-paginate/tree/main/packages/create-docusaurus/templates/shared/docs/installation.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Intro",permalink:"/mongoose-relay-paginate/docs/intro"},next:{title:"relayPaginate()",permalink:"/mongoose-relay-paginate/docs/usage/relayPaginate"}},l={},c=[{value:"Usage",id:"usage",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"installation",children:"Installation"}),"\n",(0,a.jsx)(n.p,{children:"To use this library first install in your project, like so:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm i mongoose-relay-paginate\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Then you need to register the plugin sometime before you create your models see ",(0,a.jsx)(n.a,{href:"https://mongoosejs.com/docs/plugins.html#global",children:"mongoose's global plugins documentation"})," for help:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:'import { plugin, Model, model, Schema } from "mongoose";\nimport { relayPaginatePlugin, RelayPaginateQueryHelper, RelayPaginateStatics } from "mongoose-relay-paginate";\n\n// 0. Register the relay paginate plugins.\nplugin(\n  relayPaginatePlugin({\n    // Send in options\n    maxLimit: 100,\n  })\n);\n\n// 1. Create an interface representing a document in MongoDB.\ninterface User {\n  _id: mongoose.Types.ObjectId;\n  myId: number;\n  name: string;\n  email: string;\n  avatar?: string;\n}\n\n// 2. Setup various types.\ntype UserModel = Model<User, RelayPaginateQueryHelper> & RelayPaginateStatics;\n\n// 3. Create a Schema corresponding to the document interface.\nconst schema = new Schema<User, UserModel>({\n  myId: Number,\n  name: { type: String, required: true },\n  email: { type: String, required: true },\n  avatar: String,\n});\n\n// 4. Create your Model.\nconst UserModel = model<User, UserModel>("User", schema);\n'})}),"\n",(0,a.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsx)(n.p,{children:"Now the relayPaginate should be available on your model's mongoose queries, so you can use it as shown below."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"const result = await UserModel.find()\n  // sorting by id from largest (most recent)--\x3e to smallest (most early) using mongoose's default sort.\n  .sort({ _id: -1 })\n  // This library's `relayPaginate` can now be used off your query\n  // after the above setup.\n  .relayPaginate({\n    first: 1,\n  });\n"})}),"\n",(0,a.jsx)(n.p,{children:"Or use an aggregate query off of your model:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"const result = await UserModel\n  // sorting by id from largest--\x3esmallest using mongoose's default sort.\n  .aggregateRelayPaginate([{ $sort: { _id: 1 } }], {\n    first: 1,\n  });\n"})}),"\n",(0,a.jsxs)(n.p,{children:["For more details view the ",(0,a.jsx)(n.a,{href:"https://johnsonjo4531.github.io/mongoose-relay-paginate/",children:"docs"}),"."]})]})}function g(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>i,a:()=>r});var a=t(7294);const o={},s=a.createContext(o);function r(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);